version: 2

# Describe source table(s).
sources:
  - name: staging
    description: The staging area.
    schema: staging
    
    tables:
      - name: c4c_contact
        description: Sample contact data.
        tags: ["PII"]
        meta:
          owner: "@mza.ext"

        columns:
          - name: id
            description: "The primary key, a base64-encoded integer, autogenerated by Salesforce"
            tests:
              - unique
              - not_null
          - name: accountid
            description: "The account (company) for which this person is a contact person."
            tests:
              - not_null
          - name: firstname
            description: "The first name."
            tests:
              - not_null
          - name: lastname
            description: "The last name."
            tests:
              - not_null
          - name: contactemail
            description: "The email address of the contact person."
            tests:
              - not_null
            tags:
              - PII
          - name: mailingcity
            description: "The location of the contact person."
            tests:
              - not_null
          - name: country
            desctiption: "The country of the contact person."
            tests:
              - not_null
          - name: updated_at
            data_type: TIMESTAMP
            description: "When the row was last updated. Any write operations should update this field."
            tests:
              - not_null

      - name: c4c_account
        description: Sample account data.
        # loaded_at_field: _viadot_downloaded_at_utc::timestamp
        # freshness:
        #   warn_after:
        #     count: 5
        #     period: hour
        #   error_after:
        #     count: 9
        #     period: hour
        tags: ["PII"]
        meta:
          owner: "@mza.ext"

# Describe destination (target) table(s).
models:
  - name: c4c_contact_sample
    description: "A sample of data from 'raw.c4c_contact'."
    meta:
      owner: "@mza.ext"
    columns:
      - name: id
        description: "The primary key, a base64-encoded integer, autogenerated by Salesforce"
        tests:
          - unique
          - not_null
      - name: accountid
        description: "The account (company) for which this person is a contact person."
        tests:
          - not_null
      - name: firstname
        description: "The first name."
        tests:
          - not_null
      - name: lastname
        description: "The last name."
        tests:
          - not_null
      - name: contactemail
        description: "The email address of the contact person."
        tests:
          - not_null
        tags:
          - PII
      - name: mailingcity
        description: "The location of the contact person."
        tests:
          - not_null
      - name: country
        desctiption: "The country of the contact person."
        tests:
          - not_null
      - name: updated_at
        data_type: TIMESTAMP
        description: "When the row was last updated. Any write operations should update this field."
        tests:
          - not_null